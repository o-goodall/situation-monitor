var O=Object.defineProperty;var S=s=>{throw TypeError(s)};var x=(s,e,t)=>e in s?O(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var w=(s,e,t)=>x(s,typeof e!="symbol"?e+"":e,t),E=(s,e,t)=>e.has(s)||S("Cannot "+t);var a=(s,e,t)=>(E(s,e,"read from private field"),t?t.call(s):e.get(s)),d=(s,e,t)=>e.has(s)?S("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(s):e.set(s,t),M=(s,e,t,i)=>(E(s,e,"write to private field"),i?i.call(s,t):e.set(s,t),t);import{I as k,J as U,K as A,M as Y,N as D,O as I,Q as N,R as B,T as C,U as H,V as $,W as J,X as K,Y as L,Z as P,_ as Q,$ as V,a0 as W,a1 as y,a2 as X,a3 as Z,a4 as F,a5 as j,a6 as q,a7 as z,a as G,s as ee}from"./CajaBwv3.js";var h,l,u,_,p,v,m;class se{constructor(e,t=!0){w(this,"anchor");d(this,h,new Map);d(this,l,new Map);d(this,u,new Map);d(this,_,new Set);d(this,p,!0);d(this,v,()=>{var e=k;if(a(this,h).has(e)){var t=a(this,h).get(e),i=a(this,l).get(t);if(i)U(i),a(this,_).delete(t);else{var f=a(this,u).get(t);f&&(a(this,l).set(t,f.effect),a(this,u).delete(t),f.fragment.lastChild.remove(),this.anchor.before(f.fragment),i=f.effect)}for(const[r,n]of a(this,h)){if(a(this,h).delete(r),r===e)break;const c=a(this,u).get(n);c&&(A(c.effect),a(this,u).delete(n))}for(const[r,n]of a(this,l)){if(r===t||a(this,_).has(r))continue;const c=()=>{if(Array.from(a(this,h).values()).includes(r)){var b=document.createDocumentFragment();C(n,b),b.append(D()),a(this,u).set(r,{effect:n,fragment:b})}else A(n);a(this,_).delete(r),a(this,l).delete(r)};a(this,p)||!i?(a(this,_).add(r),Y(n,c,!1)):c()}}});d(this,m,e=>{a(this,h).delete(e);const t=Array.from(a(this,h).values());for(const[i,f]of a(this,u))t.includes(i)||(A(f.effect),a(this,u).delete(i))});this.anchor=e,M(this,p,t)}ensure(e,t){var i=k,f=H();if(t&&!a(this,l).has(e)&&!a(this,u).has(e))if(f){var r=document.createDocumentFragment(),n=D();r.append(n),a(this,u).set(e,{effect:I(()=>t(n)),fragment:r})}else a(this,l).set(e,I(()=>t(this.anchor)));if(a(this,h).set(i,e),f){for(const[c,o]of a(this,l))c===e?i.unskip_effect(o):i.skip_effect(o);for(const[c,o]of a(this,u))c===e?i.unskip_effect(o.effect):i.skip_effect(o.effect);i.oncommit(a(this,v)),i.ondiscard(a(this,m))}else N&&(this.anchor=B),a(this,v).call(this)}}h=new WeakMap,l=new WeakMap,u=new WeakMap,_=new WeakMap,p=new WeakMap,v=new WeakMap,m=new WeakMap;function ie(s,e,t=!1){N&&J();var i=new se(s),f=t?K:0;function r(n,c){if(N){const T=L(s);var o;if(T===P?o=0:T===Q?o=!1:o=parseInt(T.substring(1)),n!==o){var b=V();W(b),i.anchor=b,y(!1),i.ensure(n,c),y(!0);return}}i.ensure(n,c)}$(()=>{var n=!1;e((c,o=0)=>{n=!0,r(o,c)}),n||r(!1,null)},f)}let g=!1,R=Symbol();function re(s,e,t){const i=t[e]??(t[e]={store:null,source:j(void 0),unsubscribe:F});if(i.store!==s&&!(R in t))if(i.unsubscribe(),i.store=s??null,s==null)i.source.v=void 0,i.unsubscribe=F;else{var f=!0;i.unsubscribe=q(s,r=>{f?i.source.v=r:ee(i.source,r)}),f=!1}return s&&R in t?z(s):G(i.source)}function ne(s,e){return s.set(e),e}function fe(){const s={};function e(){X(()=>{for(var t in s)s[t].unsubscribe();Z(s,R,{enumerable:!1,value:!0})})}return[s,e]}function ce(s,e,t){return s.set(t),e}function oe(s){var e=g;try{return g=!1,[s(),g]}finally{g=e}}export{se as B,ne as a,re as b,oe as c,ce as d,ie as i,fe as s};
