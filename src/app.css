@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
@tailwind base;
@tailwind components;
@tailwind utilities;

/* ══ TOKENS ══════════════════════════════════════════════════ */
:root {
  --bg:        #0B0B0B;
  --bg2:       #121212;
  --bg3:       #181818;
  --orange:    #F7931A;
  --orange-lo: rgba(247,147,26,0.08);
  --orange-md: rgba(247,147,26,0.18);
  --orange-hi: rgba(247,147,26,0.32);
  --glass-bg:  rgba(255,255,255,0.07);
  --glass-bg2: rgba(255,255,255,0.10);
  --glass-bd:  rgba(255,255,255,0.10);
  --glass-bd2: rgba(255,255,255,0.16);
  /* Liquid Glass tokens */
  --glass-blur: 16px;
  --glass-blur-mobile: 12px;
  --glass-blur-tile-mobile: 10px;
  --glass-sheen: linear-gradient(135deg, rgba(255,255,255,0.18) 0%, rgba(255,255,255,0.04) 50%, transparent 100%);
  --glass-inner: inset 0 1px 0 rgba(255,255,255,0.22), inset 0 -1px 0 rgba(0,0,0,0.10);
  --t1: rgba(255,255,255,0.92);
  --t2: rgba(255,255,255,0.78);
  --t3: rgba(255,255,255,0.62);
  --t4: rgba(255,255,255,0.50);
  --up: #22c55e;
  --dn: #ef4444;
  /* Consistent radius scale */
  --r-sm: 4px;
  --r-md: 10px;
  --r-lg: 16px;
  /* Shadow scale */
  --shadow-sm: 0 2px 8px rgba(0,0,0,0.28);
  --shadow-md: 0 6px 24px rgba(0,0,0,0.38);
  --shadow-lg: 0 10px 30px rgba(0,0,0,0.45);
  /* Transition presets */
  --ease-fast: 0.15s ease;
  --ease-med:  0.25s ease;
  --ease-slow: 0.4s ease;
  /* Layout — consistent container strategy */
  --container-max-w: 1440px;
  --container-pad-x: 24px;
  --container-pad-x-mobile: 14px;
  /* Spacing scale (4px base unit) */
  --sp-1: 4px;
  --sp-2: 8px;
  --sp-3: 12px;
  --sp-4: 16px;
  --sp-5: 20px;
  --sp-6: 24px;
  --sp-8: 32px;
  --sp-10: 40px;
  --sp-12: 48px;
  /* Grid / tile gap — one token used by every tile grid */
  --tile-gap: 16px;
  --tile-gap-mobile: 8px;
}

*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

html { font-size: 16px; -webkit-font-smoothing: antialiased; scroll-behavior: smooth; scroll-padding-top: 64px; -webkit-text-size-adjust: 100%; text-size-adjust: 100%; }

body {
  background: var(--bg);
  color: var(--t1);
  font-family: 'Inter', system-ui, -apple-system, 'Segoe UI', sans-serif;
  font-weight: 400;
  font-size: 1rem;
  line-height: 1.6;
  min-height: 100vh;
  overflow-x: hidden;
}

/* ══ HEADING HIERARCHY ═════════════════════════════════════ */
h1, h2, h3, h4, h5, h6 {
  font-family: inherit;
  line-height: 1.2;
  letter-spacing: -0.01em;
  color: var(--t1);
}
h1 { font-size: 36px; font-weight: 600; }
h2 { font-size: 22px; font-weight: 600; }
h3 { font-size: 16px; font-weight: 600; }
h4 { font-size: 15px; font-weight: 500; }
h5 { font-size: 14px; font-weight: 500; }
h6 { font-size: 12px; font-weight: 500; }

/* ══ LINKS ═════════════════════════════════════════════════ */
a {
  font-family: inherit;
  color: inherit;
  text-decoration: none;
}

/* Layered ambient background — warm Bitcoin-orange tones with subtle depth */
body::before {
  content: '';
  position: fixed; inset: 0; z-index: -2;
  background:
    radial-gradient(circle at 15% 85%, rgba(247,147,26,0.10) 0%, transparent 45%),
    radial-gradient(circle at 85% 10%, rgba(247,147,26,0.07) 0%, transparent 45%),
    radial-gradient(circle at 50% 50%, rgba(180,100,0,0.04) 0%, transparent 70%),
    radial-gradient(circle at 30% 20%, rgba(120,60,0,0.04) 0%, transparent 40%);
  pointer-events: none;
}
/* Second depth layer — adds faint luminosity gradient for 3D glass depth */
body::after {
  content: '';
  position: fixed; inset: 0; z-index: -3;
  background: radial-gradient(ellipse at 50% 0%, rgba(247,147,26,0.04) 0%, transparent 60%);
  pointer-events: none;
}

/* ══ BUTTONS ════════════════════════════════════════════ */

/* Primary — solid orange, black text */
.btn-primary {
  display: inline-flex; align-items: center; justify-content: center; gap: 8px;
  padding: 10px 18px; border: none; border-radius: var(--r-md);
  background: var(--orange);
  color: #000000; font-family: inherit;
  font-size: 14px; font-weight: 600;
  cursor: pointer; position: relative;
  transition: filter var(--ease-fast), box-shadow var(--ease-fast);
  text-decoration: none;
}
.btn-primary:hover { filter: brightness(1.06); box-shadow: 0 4px 14px rgba(247,147,26,0.3); }

/* Secondary — outlined */
.btn-secondary {
  display: inline-flex; align-items: center; justify-content: center; gap: 8px;
  padding: 9px 18px; background: transparent;
  border: 1px solid rgba(255,255,255,0.12); border-radius: var(--r-md);
  color: var(--t2); font-family: inherit;
  font-size: 14px; font-weight: 500;
  cursor: pointer; transition: background var(--ease-fast), border-color var(--ease-fast);
  text-decoration: none;
}
.btn-secondary:hover { background: rgba(255,255,255,0.05); border-color: rgba(255,255,255,0.18); }

/* Ghost — very faint, for tertiary actions */
.btn-ghost {
  display: inline-flex; align-items: center; gap: 6px;
  padding: 6px 14px; background: rgba(255,255,255,0.04);
  border: 1px solid rgba(255,255,255,0.08); border-radius: var(--r-sm);
  color: var(--t3); font-family: inherit;
  font-size: 13px; font-weight: 500;
  cursor: pointer; transition: background var(--ease-fast), border-color var(--ease-fast), color var(--ease-fast);
  text-decoration: none;
}
.btn-ghost:hover { border-color: rgba(247,147,26,0.30); color: var(--orange); background: rgba(247,147,26,0.08); }

/* ══ GLASS CARD ════════════════════════════════════════ */
.card {
  background: rgba(255,255,255,0.10);
  backdrop-filter: blur(var(--glass-blur));
  -webkit-backdrop-filter: blur(var(--glass-blur));
  border: 1px solid var(--glass-bd);
  border-radius: var(--r-lg); padding: 24px;
  box-shadow: 0 8px 32px rgba(0,0,0,0.42), var(--glass-inner);
  position: relative; overflow: hidden;
  transition: border-color var(--ease-med), box-shadow var(--ease-med);
}
.card::before {
  content: ''; position: absolute; top: 0; left: 0; right: 0; height: 1px;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
}
.card:hover {
  border-color: rgba(255,255,255,0.16);
  box-shadow: 0 14px 40px rgba(0,0,0,0.52), var(--glass-inner);
}

/* Section divider — subtle single line */
.section-divider {
  width: 100%; height: 1px;
  background: rgba(255,255,255,0.06);
  margin: 0;
}

/* ══ SECTION LABEL ═════════════════════════════════════ */
.sect-title {
  font-family: inherit;
  font-size: 17px; font-weight: 600;
  color: var(--t1);
  letter-spacing: -0.015em;
  line-height: 1;
  padding-left: 10px;
  border-left: 2px solid var(--orange);
}

/* ══ SKIP LINK ══════════════════════════════════════════ */
.skip-link {
  position: fixed; top: -100%; left: 50%; transform: translateX(-50%);
  z-index: 9999; padding: 10px 20px;
  background: var(--orange); color: #000;
  font-family: inherit; font-size: 0.875rem; font-weight: 600;
  border-radius: 0 0 6px 6px; text-decoration: none;
  transition: top 0.2s;
}
.skip-link:focus { top: 0; }

/* ══ FOCUS-VISIBLE ══════════════════════════════════════ */
:focus-visible {
  outline: 2px solid var(--orange);
  outline-offset: 2px;
  border-radius: 3px;
}
:focus:not(:focus-visible) { outline: none; }

/* ══ SCROLLBAR ══════════════════════════════════════════ */
::-webkit-scrollbar { width: 4px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: rgba(247,147,26,0.35); border-radius: 2px; }
::-webkit-scrollbar-thumb:hover { background: var(--orange); }

/* ══ ANIM UTILS ════════════════════════════════════════ */
@keyframes blink { 0%,100%{opacity:1} 50%{opacity:0} }
.blink { animation: blink 2s step-end infinite; }

@keyframes fadeInUp {
  from { opacity: 0; transform: translateY(12px); }
  to   { opacity: 1; transform: translateY(0); }
}
.fade-in-up { animation: fadeInUp 0.4s ease-out both; }

/* ── SCROLL REVEAL ─────────────────────────────────────── */
.scroll-reveal {
  opacity: 0;
  transition: opacity 0.5s ease-out;
  will-change: opacity;
}
.scroll-reveal.sr-visible { opacity: 1; }
@media (prefers-reduced-motion: reduce) {
  .scroll-reveal { opacity: 1 !important; transition: none !important; will-change: auto; }
}

/* ── MOBILE PAGE TRANSITION ────────────────────────────── */
@keyframes mobPageEnter {
  from { opacity: 0; transform: translate3d(0, 12px, 0); }
  to   { opacity: 1; transform: translate3d(0, 0, 0); }
}
.mob-page-enter {
  animation: mobPageEnter 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94) both;
  will-change: transform, opacity;
}
@media (prefers-reduced-motion: reduce) {
  .mob-page-enter { animation: none !important; }
}

@keyframes shimmer {
  0%   { background-position: -200% 0; }
  100% { background-position:  200% 0; }
}
.skeleton {
  background: linear-gradient(90deg, rgba(255,255,255,.04) 25%, rgba(255,255,255,.09) 50%, rgba(255,255,255,.04) 75%);
  background-size: 200% 100%;
  animation: shimmer 1.6s ease-in-out infinite;
  border-radius: var(--r-sm);
}

/* Tooltip via data-tooltip attribute */
[data-tooltip] { position: relative; cursor: default; }
[data-tooltip]::after {
  content: attr(data-tooltip);
  position: absolute; bottom: calc(100% + 6px); left: 50%; transform: translateX(-50%);
  background: rgba(20,20,20,0.97); color: var(--t1);
  font-family: inherit; font-size: 12px; font-weight: 500;
  white-space: nowrap; padding: 5px 10px; border-radius: var(--r-sm);
  border: 1px solid rgba(255,255,255,0.08);
  box-shadow: 0 4px 14px rgba(0,0,0,0.4);
  pointer-events: none; opacity: 0;
  transition: opacity var(--ease-fast), transform var(--ease-fast);
  transform: translateX(-50%) translateY(4px);
  z-index: 9999;
}
[data-tooltip]:hover::after {
  opacity: 1;
  transform: translateX(-50%) translateY(0);
}

/* Badge pill */
.badge {
  display: inline-flex; align-items: center; gap: 4px;
  padding: 2px 8px; border-radius: 999px;
  font-size: 11px; font-weight: 600;
  font-family: inherit;
}
.badge--orange { background: rgba(247,147,26,0.12); color: var(--orange); border: 1px solid rgba(247,147,26,0.25); }
.badge--up     { background: rgba(34,197,94,0.1);  color: var(--up);    border: 1px solid rgba(34,197,94,0.22); }
.badge--dn     { background: rgba(239,68,68,0.1);  color: var(--dn);    border: 1px solid rgba(239,68,68,0.22); }
.badge--muted  { background: rgba(255,255,255,.04); color: var(--t2);   border: 1px solid rgba(255,255,255,.1); }

@media (max-width:600px) { .card { padding:16px; border-radius:var(--r-lg); } }

/* ══ MOBILE PERFORMANCE ═════════════════════════════════════ */
@media (max-width:768px) {
  /* Disable ambient background gradient on mobile — animation provides depth */
  body::before { display:none; }
  body::after  { display:none; }
}

/* ── LIGHT MODE GLOBAL OVERRIDES ══════════════════════════ */
html.light body::before {
  background:
    radial-gradient(circle at 15% 85%, rgba(247,147,26,.07) 0%, transparent 45%),
    radial-gradient(circle at 85% 10%, rgba(247,147,26,.05) 0%, transparent 45%);
}
html.light body::after { display:none; }
html.light .card {
  background: rgba(255,255,255,.80); border-color: rgba(0,0,0,.10);
  box-shadow: 0 4px 20px rgba(0,0,0,.08), inset 0 1px 0 rgba(255,255,255,.95), inset 0 -1px 0 rgba(0,0,0,.04);
}
html.light .card:hover { border-color: rgba(247,147,26,.2); box-shadow: 0 8px 28px rgba(0,0,0,.10); }
html.light .section-divider { background: rgba(0,0,0,.08); }
html.light .section-header { border-bottom-color: rgba(0,0,0,.07); }
html.light .sect-title { color: #111; }
html.light h1, html.light h2, html.light h3, html.light h4, html.light h5, html.light h6 { color: #111; }
html.light .btn-ghost { color:rgba(0,0,0,.5); border-color:rgba(0,0,0,.1); background:rgba(0,0,0,.02); }
html.light .btn-ghost:hover { color:#c77a10; border-color:rgba(200,120,16,.45); background:rgba(247,147,26,.1); }
html.light .btn-secondary { border-color:rgba(0,0,0,.15); color:rgba(0,0,0,.7); }
html.light .btn-secondary:hover { background:rgba(0,0,0,.05); }
html.light ::-webkit-scrollbar-thumb { background:rgba(200,120,16,.3); }
html.light ::-webkit-scrollbar-thumb:hover { background:rgba(200,120,16,.7); }
html.light [data-tooltip]::after { background:rgba(255,255,255,.97); color:#111; border-color:rgba(0,0,0,.12); }
html.light .badge--orange { background:rgba(247,147,26,.08); }
html.light .badge--muted { background:rgba(0,0,0,.04); border-color:rgba(0,0,0,.1); color:rgba(0,0,0,.5); }
html.light .skeleton { background: linear-gradient(90deg, rgba(0,0,0,.04) 25%, rgba(0,0,0,.08) 50%, rgba(0,0,0,.04) 75%); background-size: 200% 100%; }
/* Light mode .gc and .stat-tile overrides */
html.light .gc { background: rgba(255,255,255,.78); border-color: rgba(0,0,0,.10); box-shadow: 0 4px 20px rgba(0,0,0,.08), inset 0 1px 0 rgba(255,255,255,.95), inset 0 -1px 0 rgba(0,0,0,.04); }
html.light .gc::before { background: linear-gradient(90deg,transparent,rgba(255,255,255,.9),transparent); }
html.light .gc::after  { background: linear-gradient(180deg,rgba(255,255,255,.15) 0%,transparent 100%); }
html.light .gc:hover { border-color: rgba(0,0,0,.15); box-shadow: 0 8px 28px rgba(0,0,0,.10), inset 0 1px 0 rgba(255,255,255,.95); }
html.light .stat-tile { background: rgba(255,255,255,.78); border-color: rgba(0,0,0,.10); box-shadow: 0 4px 16px rgba(0,0,0,.07), inset 0 1px 0 rgba(255,255,255,.95), inset 0 -1px 0 rgba(0,0,0,.04); }
html.light .stat-tile::before { background: linear-gradient(90deg,transparent,rgba(255,255,255,.9),transparent); }
html.light .stat-tile::after  { background: linear-gradient(180deg,rgba(255,255,255,.15) 0%,transparent 100%); }
html.light .pm-card { background: rgba(255,255,255,.78); border-color: rgba(0,0,0,.10); box-shadow: 0 4px 18px rgba(0,0,0,.07), inset 0 1px 0 rgba(255,255,255,.95); }
html.light .pm-card::before { background: linear-gradient(90deg,transparent,rgba(255,255,255,.9),transparent); }
html.light .gc-title { color: rgba(0,0,0,.60); }
  /* ── SWIPEABLE PAGES (mobile only) ─────────────────────────── */
  /* Desktop: pages-outer/pages-inner/swipe-page are transparent wrappers */
  .pages-outer { display: contents; }
  .pages-inner { display: contents; }
  .swipe-page  { display: contents; }

  @media (max-width: 768px) {
    .pages-outer {
      display: block;
      overflow: hidden;
      width: 100%;
      /* Full viewport height minus bottom nav */
      height: calc(100vh - var(--bottom-nav-h, 72px));
      height: calc(100svh - var(--bottom-nav-h, 72px));
      position: relative;
    }

    .pages-inner {
      display: flex;
      /* Each swipe-page is 100vw, so 3 pages = 300vw */
      width: 300%;
      height: 100%;
      will-change: transform;
      transition: transform 0.38s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    }

    /* Disable transition while dragging for instant feedback */
    .pages-inner.no-transition {
      transition: none;
    }

    .swipe-page {
      display: block;
      width: 33.333%;
      flex-shrink: 0;
      height: 100%;
      overflow-y: hidden;
      overflow-x: hidden;
      overscroll-behavior-y: contain;
    }

    /* Intel page still scrolls — it has a lot of content */
    .swipe-page:nth-child(3) {
      overflow-y: auto;
      -webkit-overflow-scrolling: touch;
    }

    /* On mobile, sections fill their swipe-page */
    .section {
      min-height: unset !important;
      width: 100% !important;
      max-width: 100% !important;
      margin: 0 !important;
      overflow: clip !important;
    }
  }

  /* ── LAYOUT ──────────────────────────────────────────────── */
  .section { max-width: var(--container-max-w); margin: 0 auto; padding: var(--sp-12) var(--container-pad-x) 0; min-height: 100vh; position: relative; overflow: clip; }
  /* Desktop scroll snap — align section start to viewport */
  @media (min-width:701px) {
    .section { scroll-snap-align: start; }
  }
  .section::before { content: ''; position: absolute; inset: -20% 0; z-index: -1; background: radial-gradient(ellipse at 50% 30%, rgba(247,147,26,.04) 0%, transparent 70%); transform: translateY(calc(var(--section-parallax, 0) * 1px)); will-change: transform; pointer-events: none; }
  .section-header {
    display: flex; align-items: center; gap: 16px; flex-wrap: wrap;
    padding-bottom: 16px; margin-bottom: 20px;
    border-bottom: 1px solid rgba(255,255,255,0.06);
  }
  .pg-container { margin-bottom: 20px; }

  .section-divider {
    max-width:var(--container-max-w); margin:48px auto 0;
    height:1px; background:rgba(255,255,255,0.06);
    position:relative;
  }
  @media (max-width:700px) {
    .section {
      padding:20px var(--container-pad-x-mobile) 0;
      width:100%;
    }
    .section-header {
      padding-bottom:10px; margin-bottom:12px;
    }
    .section-divider { margin-top:16px; }
    /* Signal and Portfolio: fixed viewport height, internal scroll for overflow */
    #signal    { height:calc(100dvh - var(--bottom-nav-h) - env(safe-area-inset-bottom, 0px)); min-height:unset; overflow-y:auto; -webkit-overflow-scrolling:touch; overscroll-behavior-y:contain; padding-bottom:20px; }
    #portfolio { height:calc(100dvh - var(--bottom-nav-h) - env(safe-area-inset-bottom, 0px)); min-height:unset; overflow-y:auto; -webkit-overflow-scrolling:touch; overscroll-behavior-y:contain; padding-bottom:20px; }
    /* Intel: allow scrolling with clearance for bottom nav */
    #intel     { padding-bottom:calc(var(--bottom-nav-h) + env(safe-area-inset-bottom, 0px) + 16px); }
    /* Uniform tile gap across all section grids on mobile */
    .port-grid   { gap:var(--tile-gap-mobile); }
    .intel-grid  { gap:var(--tile-gap-mobile); }
    .signal-grid { gap:var(--tile-gap-mobile); }
    .stat-strip  { gap:var(--tile-gap-mobile); margin-bottom:8px; }
    /* Hide Connect Ghostfolio tile on mobile when no token is configured */
    .gc--no-token { display:none; }
    /* DCA signal indicators: one clean horizontal line */
    .sigs { flex-wrap:nowrap; overflow-x:hidden; gap:4px; padding:10px 0 0; }
    .sig  { min-width:0; flex:1; padding:5px 6px; border-radius:6px; gap:4px; }
    .sig-body { flex-direction:row; align-items:center; gap:3px; }
    .sig-val  { display:none; }
    .sig-label { font-size:.55rem; }
  }
  @media (max-width:600px) {
    .section-header { margin-bottom:14px; }
  }

  /* ── STAT STRIP ─────────────────────────────────────────── */
  .stat-strip { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: var(--tile-gap); margin-bottom: 20px; }
  .stat-tile {
    padding: 16px 14px; text-align: center;
    background: rgba(255,255,255,0.13); border: 1px solid rgba(255,255,255,0.14);
    border-radius: var(--r-md); backdrop-filter: blur(var(--glass-blur));
    -webkit-backdrop-filter: blur(var(--glass-blur));
    transition: transform .25s, border-color .25s, box-shadow .25s;
    position: relative; overflow: hidden;
    display: flex; flex-direction: column; justify-content: center; align-items: center;
    box-shadow: 0 6px 24px rgba(0,0,0,.32), inset 0 1px 0 rgba(255,255,255,.22), inset 0 -1px 0 rgba(0,0,0,.10);
    contain: layout style;
  }
  .stat-tile::before {
    content:''; position:absolute; top:0; left:0; right:0; height:1px;
    background:linear-gradient(90deg,transparent,rgba(255,255,255,.45),transparent);
    z-index:0;
  }
  .stat-tile::after {
    content:''; position:absolute; bottom:0; left:0; width:100%; height:60%;
    background:linear-gradient(0deg,rgba(0,0,0,0.10) 0%,transparent 100%);
    pointer-events:none; z-index:0;
  }
  .stat-tile:hover { transform:translateY(-4px); border-color:rgba(255,255,255,.22); box-shadow:0 12px 32px rgba(0,0,0,.38), inset 0 1px 0 rgba(255,255,255,.24), inset 0 -1px 0 rgba(0,0,0,.10); }

  .stat-tile--chart { padding-bottom: 0; cursor:default; }
  .stat-tile--chart::before { display:none; }
  .tile-spark { position: absolute; bottom: 0; left: 0; right: 0; height: 52px; opacity: 0.7; pointer-events: none; }
  .stat-tile--chart .price-pair, .stat-tile--chart .stat-l, .stat-tile--chart .stat-l-row { position: relative; z-index: 1; }
  .stat-tile--chart .stat-l-row { display: flex; flex-direction: column; justify-content: center; align-items: center; gap: 3px; padding-bottom: 56px; }

  /* Consistent tile header — top-left of stat tiles */
  .tile-header {
    position: absolute; top: 8px; left: 10px; z-index: 2;
    font-size: .58rem; font-weight: 500; color: var(--t3);
    letter-spacing: .04em; line-height: 1;
  }
  :global(html.light) .tile-header { color: rgba(0,0,0,.38); }

  /* BTC price pair — USD | Currency side by side */
  .price-pair { display:flex; align-items:baseline; gap:6px; flex-wrap:wrap; justify-content:center; margin-bottom:4px; position:relative; z-index:1; margin-top:8px; }
  .price-usd { font-size:1.4rem; font-weight:700; letter-spacing:-.025em; line-height:1.1; }
  .price-sep { font-size:.9rem; color:var(--t3); font-weight:400; }
  .price-alt { font-size:1.4rem; font-weight:700; letter-spacing:-.025em; line-height:1.1; }
  .price-label-usd {
    font-weight: 700;
    color: #22c55e;
  }
  .price-label-sep { color:var(--t3); margin-right:3px; }
  .price-label-cur { color:#22c55e; font-weight:700; }
  .price-day-change {
    font-size: .68rem; font-weight: 600; letter-spacing: .02em;
    padding: 2px 7px; border-radius: 4px; display: inline-block;
  }
  .price-day-change--up {
    color: var(--up);
    background: rgba(34,197,94,.12);
    border: 1px solid rgba(34,197,94,.22);
  }
  .price-day-change--dn {
    color: var(--dn);
    background: rgba(239,68,68,.12);
    border: 1px solid rgba(239,68,68,.22);
  }
  @media (max-width:500px) {
    .price-usd { font-size:1.2rem; }
    .price-alt { font-size:1.2rem; }
    .price-sep { font-size:.8rem; }
  }

  /* Sats per currency — large SATS display */
  .sats-display { display:flex; align-items:baseline; gap:6px; justify-content:center; margin-bottom:4px; }
  .sats-cur { font-size:1.4rem; font-weight:700; color:#e2e2e8; letter-spacing:-.025em; line-height:1.1; }
  .sats-label-sats { color:var(--orange); font-weight:700; }
  .sats-label-cur  { color:#22c55e; font-weight:700; }
  @media (max-width:500px) {
    .sats-cur { font-size:1.15rem; }
  }

  .stat-n { display:block; font-size:1.4rem; font-weight:700; letter-spacing:-.025em; margin-bottom:6px; line-height:1.1; color:var(--t1); position:relative; z-index:1; }
  .stat-l { font-size:.58rem; color:var(--t2); text-transform:uppercase; letter-spacing:.1em; position:relative; z-index:1; }

  /* Halving number — same size as price-alt for uniformity */
  .halving-n { font-size:1.4rem; font-weight:700; letter-spacing:-.025em; }

  /* Halving date label */
  .halving-date { font-size:.58rem; color:var(--orange); margin-top:4px; font-variant-numeric:tabular-nums; letter-spacing:.03em; position:relative; display:inline-block; }

  /* Static orange labels — no animated foil */
  .halving-date--glow, .btc-glimmer, .eyebrow.orange, .sats-label-sats {
    color: var(--orange);
  }

  /* Static stat tile — no interactive cursor */
  .stat-tile--static { cursor:default; }

  @media (max-width:800px) { .stat-strip{ grid-template-columns:repeat(3,1fr); } }
  @media (max-width:500px) {
    /* Two-column stat strip: BTC price (stat-tile--wide) spans full width, sats + halving side by side */
    .stat-strip { grid-template-columns:1fr 1fr; gap:var(--tile-gap-mobile); }
    .stat-tile--wide { grid-column:span 2; } /* spans both columns to fill the row */
    .stat-n { font-size:1.25rem; }
    .stat-tile { padding:14px 12px; }
    .stat-tile--chart .stat-l-row { padding-bottom:52px; }
  }

  /* ── BTC PRICE CHART CARD ───────────────────────────────── */
  .btc-chart-card { padding:16px 18px; margin-bottom:14px; }
  .btc-chart-card .chart-container { height:160px; }
  .chart-header { display:flex; justify-content:space-between; align-items:center; margin-bottom:12px; flex-wrap:wrap; gap:8px; }
  .chart-controls { display:flex; align-items:center; gap:8px; flex-wrap:wrap; }
  .overlay-btns { display:flex; gap:4px; }
  .chart-container { width:100%; }
  .chart-range-btns { display:flex; gap:4px; }
  /* Small colour dot inside overlay toggle buttons */
  .crb-dot { display:inline-block; width:7px; height:7px; border-radius:50%; margin-right:5px; vertical-align:middle; flex-shrink:0; }
  .crb {
    display:inline-flex; align-items:center;
    padding:4px 12px; font-size:.62rem; font-weight:700; letter-spacing:.06em;
    text-transform:uppercase; font-family:inherit;
    background:rgba(255,255,255,.05); border:1px solid rgba(255,255,255,.1);
    border-radius:3px; color:rgba(255,255,255,.45); cursor:pointer;
    transition:background .2s, border-color .2s, color .2s, box-shadow .2s;
    position:relative; overflow:hidden;
  }
  .crb::after {
    content:''; position:absolute; inset:0; pointer-events:none; border-radius:inherit;
    background:linear-gradient(105deg,transparent 25%,rgba(255,255,255,.55) 50%,transparent 75%);
    background-size:200% 100%; background-position:-200% center;
    transition:background-position .4s ease, opacity .2s ease;
    opacity:0;
  }
  .crb:hover { color:var(--orange); border-color:rgba(247,147,26,.45); background:rgba(247,147,26,.14); box-shadow:0 0 8px rgba(247,147,26,.25); }
  .crb:hover::after { background-position:200% center; opacity:1; }
  .crb--active { background:rgba(247,147,26,.15); border-color:rgba(247,147,26,.5); color:var(--orange); }
  :global(html.light) .crb { background:rgba(0,0,0,.04); border-color:rgba(0,0,0,.1); color:rgba(0,0,0,.5); }
  :global(html.light) .crb:hover { color:#c77a10; border-color:rgba(200,120,16,.45); background:rgba(247,147,26,.1); box-shadow:0 0 8px rgba(200,120,16,.2); }
  :global(html.light) .crb--active { background:rgba(247,147,26,.1); border-color:rgba(247,147,26,.4); color:#c77a10; }
  @media (max-width:500px) { .btc-chart-card { padding:12px 12px; } }

  /* Comparison chart legend */
  .comp-legend { display:flex; align-items:center; flex-wrap:wrap; gap:12px; margin-bottom:10px; padding:8px 10px; background:rgba(255,255,255,.03); border-radius:6px; border:1px solid rgba(255,255,255,.06); }
  .comp-item { display:flex; align-items:center; gap:6px; font-size:.65rem; font-weight:600; color:var(--t2); text-transform:uppercase; letter-spacing:.06em; }
  .comp-dot { display:inline-block; width:10px; height:3px; border-radius:2px; flex-shrink:0; }
  .comp-note { font-size:.58rem; color:var(--t3); margin-left:auto; font-style:italic; text-transform:none; letter-spacing:0; }
  :global(html.light) .comp-legend { background:rgba(0,0,0,.02); border-color:rgba(0,0,0,.07); }
  :global(html.light) .comp-item { color:rgba(0,0,0,.5); }

  /* ── SIGNAL GRID ────────────────────────────────────────── */
  .signal-grid { display:grid; grid-template-columns:1fr 1fr 1fr; gap:var(--tile-gap); }
  @media (max-width:1100px) { .signal-grid{grid-template-columns:1fr 1fr;} }
  @media (max-width:768px)  { .signal-grid{grid-template-columns:1fr; gap:var(--tile-gap-mobile);} }

  /* ── GLASS CARD ─────────────────────────────────────────── */
  .gc {
    background: rgba(255,255,255,0.13); backdrop-filter: blur(var(--glass-blur));
    -webkit-backdrop-filter: blur(var(--glass-blur));
    border: 1px solid rgba(255,255,255,0.14); border-radius: var(--r-md); padding: 24px;
    box-shadow: 0 6px 28px rgba(0,0,0,.38), inset 0 1px 0 rgba(255,255,255,.20), inset 0 -1px 0 rgba(0,0,0,.10);
    transition: border-color .3s, box-shadow .3s, transform .25s; position: relative; overflow: hidden;
    contain: layout style;
  }
  .gc::before { content:''; position:absolute; top:0; left:0; right:0; height:1px; background:linear-gradient(90deg,transparent,rgba(255,255,255,.45),transparent); z-index:0; }
  .gc::after  { content:''; position:absolute; bottom:0; left:0; width:100%; height:60%; background:linear-gradient(0deg,rgba(0,0,0,0.10) 0%,transparent 100%); pointer-events:none; z-index:0; }
  .gc:hover { transform:translateY(-2px); border-color:rgba(255,255,255,.22); box-shadow:0 12px 36px rgba(0,0,0,.42), inset 0 1px 0 rgba(255,255,255,.24), inset 0 -1px 0 rgba(0,0,0,.10); }
  .gc-head { display:flex; justify-content:space-between; align-items:flex-start; margin-bottom:16px; gap:12px; }
  .gc-title { font-family:inherit; font-size:.65rem; font-weight:600; color:var(--t2); letter-spacing:.04em; text-transform:uppercase; }
  @media (max-width:600px) { .gc { padding:16px 14px; border-radius:var(--r-md); } }
  /* Reduce blur on mobile for better paint performance */
  @media (max-width:768px) {
    .gc { backdrop-filter:blur(var(--glass-blur-mobile)); -webkit-backdrop-filter:blur(var(--glass-blur-mobile)); }
    .stat-tile { backdrop-filter:blur(var(--glass-blur-tile-mobile)); -webkit-backdrop-filter:blur(var(--glass-blur-tile-mobile)); }
  }

  /* Hashrate tile — flex column so the chart fills remaining tile height */
  .gc--hashrate { display:flex; flex-direction:column; }
  .gc--hashrate .chart-container { flex:1; min-height:200px; }
  .gc--hashrate .hash-row { margin-top:auto; padding-top:10px; }
  .hashrate-legend { display:flex; gap:10px; margin-bottom:6px; }
  .hr-leg { font-size:.6rem; color:var(--c,#f7931a); font-weight:600; letter-spacing:.03em; opacity:.85; }

  /* ── MOBILE: hide supplementary sections, limit intel stories ── */
  @media (max-width:768px) {
    .btc-network-card,
    .btc-hashrate-card { display:none; }
    /* Show BTC price chart on mobile — stable height using clamp to avoid nav overlap */
    .btc-chart-card {
      margin-top:10px;
      display:flex; flex-direction:column;
      height: clamp(180px, calc(100svh - var(--bottom-nav-h, 72px) - env(safe-area-inset-bottom, 0px) - 220px), 340px);
    }
    .btc-chart-card .chart-container { flex:1; min-height:0; height:auto; }
    :global(.btc-chart-card .cc-wrap) { height:100%; }
    .dca-hero { padding:20px 0 12px; }
    /* Portfolio: hide detailed tiles, show merged summary only */
    .port-grid { display:none; }
    .mobile-port-summary { display:block; }
  }

  /* ── MOBILE MERGED PORTFOLIO SUMMARY ─────────────────────── */
  /* Hidden on desktop — shown only on mobile via the rule above */
  .mobile-port-summary { display:none; }
  .mps-nw-block { text-align:center; padding:10px 0 8px; }
  .mps-nw { font-size:2.8rem; font-weight:700; letter-spacing:-.04em; line-height:1; margin-bottom:4px; }
  .mps-perf-row { display:grid; grid-template-columns:repeat(3,1fr); gap:8px; margin:12px 0 16px; }
  .mps-perf-item {
    display:flex; flex-direction:column; gap:4px; text-align:center;
    background:rgba(255,255,255,.02); border:1px solid rgba(255,255,255,.06);
    border-radius:8px; padding:10px 6px;
  }
  .mps-perf-v { font-size:.9rem; font-weight:700; line-height:1; }
  .mps-assets {
    display:grid; grid-template-columns:repeat(3,1fr); gap:8px;
    padding-top:12px; border-top:1px solid rgba(255,255,255,.06);
  }
  .mps-assets--solo { padding-top:0; border-top:none; }
  .mps-asset-item {
    display:flex; flex-direction:column; gap:3px; text-align:center;
    background:rgba(255,255,255,.02); border:1px solid rgba(255,255,255,.06);
    border-radius:8px; padding:12px 8px;
  }
  .mps-asset-ticker { font-size:.72rem; font-weight:700; margin-bottom:4px; }
  .mps-asset-pct { font-size:1.1rem; font-weight:800; line-height:1; letter-spacing:-.02em; }
  :global(html.light) .mps-perf-item,
  :global(html.light) .mps-asset-item { background:rgba(0,0,0,.02); border-color:rgba(0,0,0,.07); }

  /* ── ATOMS ──────────────────────────────────────────────── */
  .eyebrow { font-size:.58rem; font-weight:500; text-transform:uppercase; letter-spacing:.12em; color:var(--t2); }
  .eyebrow.orange { color:var(--orange); }
  .eyebrow.dn { color:var(--dn); }
  .dim { font-size:.64rem; color:var(--t2); }
  .ts  { font-size:.58rem; color:var(--t3); font-variant-numeric:tabular-nums; }
  .up  { color:var(--up)!important; }
  .dn  { color:var(--dn)!important; }
  .muted { color:var(--t3); opacity:.3; }
  .err-msg { font-size:.72rem; color:var(--dn); padding:10px 14px; border:1px solid rgba(239,68,68,.2); border-radius:4px; background:rgba(239,68,68,.05); }
  .pbar  { height:2px; background:rgba(255,255,255,.06); border-radius:1px; overflow:hidden; }
  .pfill { height:100%; border-radius:1px; transition:width .7s cubic-bezier(.4,0,.2,1); }

  /* ── SIGNAL CARD ────────────────────────────────────────── */
  .signal-card { background:linear-gradient(180deg,rgba(247,147,26,.08) 0%,var(--glass-bg) 80px); position:relative; overflow:hidden; border-color:rgba(247,147,26,.22) !important; box-shadow:0 6px 28px rgba(0,0,0,.38),inset 0 1px 0 rgba(255,255,255,.06),0 0 0 1px rgba(247,147,26,.1),0 0 20px rgba(247,147,26,.04); }
  /* Zone-specific edge tint — full border glow */
  .signal-zone--red   { background:linear-gradient(180deg,rgba(239,68,68,.09) 0%,var(--glass-bg) 80px) !important; border-color:rgba(239,68,68,.3) !important; box-shadow:0 6px 28px rgba(0,0,0,.38),inset 0 1px 0 rgba(255,255,255,.06),0 0 0 1px rgba(239,68,68,.2),0 0 20px rgba(239,68,68,.06) !important; }
  .signal-zone--amber { border-color:rgba(251,146,60,.3) !important; box-shadow:0 6px 28px rgba(0,0,0,.38),inset 0 1px 0 rgba(255,255,255,.06),0 0 0 1px rgba(251,146,60,.2),0 0 20px rgba(251,146,60,.06) !important; }
  .signal-zone--green { background:linear-gradient(180deg,rgba(34,197,94,.09) 0%,var(--glass-bg) 80px) !important; border-color:rgba(34,197,94,.3) !important; box-shadow:0 6px 28px rgba(0,0,0,.38),inset 0 1px 0 rgba(255,255,255,.06),0 0 0 1px rgba(34,197,94,.2),0 0 20px rgba(34,197,94,.06) !important; }
  .signal-card .gc-head { position:relative; z-index:2; }

  /* Full-tile zone colour tint (absolute overlay, behind glass) */
  .zone-tint {
    position:absolute; inset:0; z-index:0; pointer-events:none;
    background:linear-gradient(180deg,rgba(247,147,26,.05) 0%,rgba(247,147,26,.01) 100%);
    transition:background .7s ease;
  }
  .zone-tint--red   { background:linear-gradient(180deg,rgba(239,68,68,.06) 0%,rgba(239,68,68,.015) 100%); }
  .zone-tint--amber { background:linear-gradient(180deg,rgba(251,146,60,.06) 0%,rgba(251,146,60,.015) 100%); }
  .zone-tint--green { background:linear-gradient(180deg,rgba(34,197,94,.06) 0%,rgba(34,197,94,.015) 100%); }

  /* Zone background GIF layer */
  .zone-bg {
    position:absolute; inset:0; z-index:0; overflow:hidden;
  }
  .zone-bg-img {
    width:100%; height:100%; object-fit:cover; object-position:center 30%;
    opacity:0.18; filter:saturate(120%);
    animation:zoneFadeIn .8s ease-out, gifGlitch 9s ease-in-out 3s infinite;
  }
  /* Frosted glass overlay on top of GIF */
  .zone-glass {
    position:absolute; inset:0; z-index:1;
    background:linear-gradient(180deg, rgba(14,14,14,.72) 0%, rgba(14,14,14,.55) 40%, rgba(14,14,14,.7) 100%);
    animation:glassGlitch 9s ease-in-out 3s infinite;
  }
  @keyframes zoneFadeIn { from{opacity:0;} to{opacity:1;} }

  /* DCA Signal tile — periodic glitch: briefly unblurs GIF + reduces glass opacity */
  @keyframes gifGlitch {
    0%, 78%, 100% { opacity:0.18; filter:saturate(120%); transform:translateX(0); }
    79%  { opacity:0.45; filter:saturate(150%); transform:translateX(3px); }
    80%  { opacity:0.60; filter:saturate(180%); transform:translateX(-4px); }
    81%  { opacity:0.50; filter:saturate(160%); transform:translateX(2px); }
    82%  { opacity:0.35; filter:saturate(140%); transform:translateX(-1px); }
    83%  { opacity:0.20; filter:saturate(125%); transform:translateX(0); }
  }
  @keyframes glassGlitch {
    0%, 78%, 100% { opacity:1; }
    79%  { opacity:0.55; }
    80%  { opacity:0.35; }
    81%  { opacity:0.5; }
    82%  { opacity:0.7; }
    83%  { opacity:1; }
  }

  /* Accessibility: disable glitch animations for users who prefer reduced motion */
  @media (prefers-reduced-motion: reduce) {
    .zone-bg-img { animation: zoneFadeIn .8s ease-out; }
    .zone-glass  { animation: none; }
  }

  /* Light mode: brighter overlay to keep text readable */
  :global(html.light) .zone-glass {
    background:linear-gradient(180deg, rgba(255,255,255,.78) 0%, rgba(255,255,255,.6) 40%, rgba(255,255,255,.75) 100%);
  }
  :global(html.light) .zone-bg-img { opacity:0.12; filter:saturate(80%); }
  :global(html.light) .signal-card { background:linear-gradient(180deg,rgba(247,147,26,.04) 0%,rgba(255,255,255,.72) 80px); }

  /* Mobile: slightly more opaque overlay for readability */
  @media (max-width:700px) {
    .zone-bg-img { opacity:0.14; }
    .zone-glass { background:linear-gradient(180deg, rgba(14,14,14,.78) 0%, rgba(14,14,14,.62) 40%, rgba(14,14,14,.76) 100%); }
    :global(html.light) .zone-glass { background:linear-gradient(180deg, rgba(255,255,255,.82) 0%, rgba(255,255,255,.65) 40%, rgba(255,255,255,.8) 100%); }
  }
  .dca-hero    { text-align:center; padding:18px 0 16px; position:relative; z-index:2; }
  .dca-n       { display:block; font-size:clamp(3rem,7vw,5rem); font-weight:800; line-height:1; letter-spacing:-.045em; transition:color .5s,text-shadow .5s; }
  .dca-sub     { font-size:.62rem; color:var(--t2); text-transform:uppercase; letter-spacing:.12em; margin-top:8px; }
  @media (max-width:700px) {
    .dca-hero { padding:10px 0 10px; }
    .dca-n    { font-size:clamp(1.8rem,8vw,2.8rem); }
    .dca-sub  { margin-top:5px; }
  }

  /* ── DCA FLIP SCENE ─────────────────────────────────────── */
  .dca-flip-scene { position:relative; z-index:2; }
  .dca-face { position:relative; }

  /* Small "?" info button — bottom-right corner of the DCA front face */
  .dca-info-btn {
    position:absolute; bottom:8px; right:8px; z-index:3;
    width:28px; height:28px; padding:0; border-radius:4px;
    background:rgba(255,255,255,.06); border:1px solid rgba(255,255,255,.14);
    color:rgba(255,255,255,.38); font-size:.62rem; font-weight:700;
    line-height:1; cursor:pointer;
    transition:background .2s, border-color .2s, color .2s, box-shadow .2s;
    display:flex; align-items:center; justify-content:center;
    overflow:hidden;
  }
  .dca-info-btn::after {
    content:''; position:absolute; inset:0; border-radius:inherit; pointer-events:none;
    background:linear-gradient(105deg,transparent 25%,rgba(255,255,255,.55) 50%,transparent 75%);
    background-size:200% 100%; background-position:-200% center;
    transition:background-position .4s ease, opacity .2s ease;
    opacity:0;
  }
  .dca-info-btn:hover {
    background:rgba(247,147,26,.14); border-color:rgba(247,147,26,.45);
    color:var(--orange); box-shadow:0 0 8px rgba(247,147,26,.25);
  }
  .dca-info-btn:hover::after { background-position:200% center; opacity:1; }
  :global(html.light) .dca-info-btn { background:rgba(0,0,0,.04); border-color:rgba(0,0,0,.12); color:rgba(0,0,0,.4); }
  :global(html.light) .dca-info-btn:hover { background:rgba(247,147,26,.1); border-color:rgba(247,147,26,.35); color:#c77a10; }

  /* Formula back face */
  .dca-formula-head { display:flex; justify-content:space-between; align-items:center; margin-bottom:14px; }
  .formula-steps {
    list-style:none; counter-reset:step; padding:0; margin:0;
    display:flex; flex-direction:column; gap:11px;
  }
  .formula-steps > li {
    position:relative; padding-left:22px; font-size:.66rem; color:var(--t2); line-height:1.65; counter-increment:step;
  }
  .formula-steps > li::before {
    content:counter(step); position:absolute; left:0; top:1px;
    width:14px; height:14px; border-radius:50%;
    background:rgba(247,147,26,.18); color:var(--orange);
    font-size:.5rem; font-weight:700; display:flex; align-items:center; justify-content:center;
  }
  .formula-steps strong { color:var(--t1); }
  .formula-steps ul { margin:5px 0 0; padding-left:10px; border-left:1px solid rgba(255,255,255,.1); display:flex; flex-direction:column; gap:3px; }
  .formula-steps ul li { font-size:.63rem; color:var(--t2); line-height:1.55; }
  .formula-boost { color:var(--up); font-weight:700; }
  :global(html.light) .formula-steps ul { border-left-color:rgba(0,0,0,.1); }
  :global(html.light) .formula-steps > li::before { background:rgba(199,122,16,.15); color:#c77a10; }
  :global(html.light) .signal-zone--red   { background:linear-gradient(180deg,rgba(239,68,68,.06) 0%,rgba(255,255,255,.72) 80px) !important; }
  :global(html.light) .signal-zone--amber { border-color:rgba(251,146,60,.3) !important; }
  :global(html.light) .signal-zone--green { background:linear-gradient(180deg,rgba(34,197,94,.06) 0%,rgba(255,255,255,.72) 80px) !important; }

  /* Zone bar — redesigned with visual zones */
  .vband       { margin-bottom:18px; position:relative; z-index:2; }
  .vband-row   { display:flex; justify-content:space-between; align-items:center; margin-bottom:7px; }
  .vband-l     { font-size:.58rem; font-weight:600; }
  .vband-l.up  { color:var(--up); } .vband-l.dn { color:var(--dn); }
  .vband-track { height:8px; background:rgba(255,255,255,.04); border-radius:4px; overflow:hidden; position:relative; }
  .vband-zones { display:flex; height:100%; }
  .vzone { height:100%; }
  .vzone--low  { flex:1; background:linear-gradient(90deg,rgba(34,197,94,.4),rgba(34,197,94,.15)); }
  .vzone--mid  { flex:1; background:linear-gradient(90deg,rgba(247,147,26,.15),rgba(247,147,26,.25),rgba(247,147,26,.15)); }
  .vzone--high { flex:1; background:linear-gradient(90deg,rgba(239,68,68,.15),rgba(239,68,68,.4)); }
  .vband-dot {
    position:absolute; top:50%; transform:translate(-50%,-50%);
    width:14px; height:14px; border-radius:50%;
    background:var(--t1); border:2px solid var(--orange);
    box-shadow:0 0 10px rgba(247,147,26,.5);
    transition:left .8s cubic-bezier(.4,0,.2,1);
  }
  .vband-labels { display:flex; justify-content:space-between; margin-top:5px; font-size:.54rem; color:var(--t3); font-weight:500; }

  /* Signals */
  .sigs  { display:flex; flex-direction:row; flex-wrap:wrap; gap:8px; padding:14px 0 0; border-top:1px solid rgba(255,255,255,.05); position:relative; z-index:2; }
  .sig   { display:flex; align-items:center; gap:8px; transition:opacity .2s; cursor:default; flex:1 1 auto; min-width:120px; background:rgba(255,255,255,.03); border:1px solid rgba(255,255,255,.06); border-radius:8px; padding:7px 10px; }
  .sig:not(.sig--on) { opacity:.28; }
  .pip-wrap  { position:relative; width:14px; height:14px; flex-shrink:0; }
  .pip       { width:9px; height:9px; border-radius:50%; background:rgba(255,255,255,.1); border:1px solid rgba(255,255,255,.15); transition:all .25s; position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); }
  .pip--on   { background:var(--orange); border-color:var(--orange); box-shadow:0 0 10px rgba(247,147,26,.6); }
  .pip-ring  { position:absolute; inset:0; border-radius:50%; background:rgba(247,147,26,.14); animation:rp 2s ease-out infinite; }
  @keyframes rp { 0%{transform:scale(1);opacity:.8} 100%{transform:scale(2.6);opacity:0} }
  .sig-body  { flex:1; display:flex; flex-direction:column; gap:2px; min-width:0; }
  .sig-label { font-size:.68rem; color:var(--t1); opacity:.85; line-height:1.3; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
  .sig-val   { font-size:.56rem; color:var(--orange); opacity:.8; font-variant-numeric:tabular-nums; font-weight:600; }
  .sig-badge { font-size:.6rem; color:var(--orange); font-weight:600; background:rgba(247,147,26,.1); border:1px solid rgba(247,147,26,.22); padding:2px 8px; border-radius:3px; white-space:nowrap; flex-shrink:0; }
  :global(html.light) .sig-val { color:#c77a10; }

  /* ── LATEST BLOCK / MEMPOOL ──────────────────────────────── */
  .latest-block { margin-bottom:16px; padding-bottom:14px; border-bottom:1px solid rgba(255,255,255,.05); }
  .lb-header { display:flex; justify-content:space-between; align-items:center; margin-bottom:10px; }
  .lb-grid { display:grid; grid-template-columns:repeat(3,1fr); gap:10px; }
  .lb-item { display:flex; flex-direction:column; gap:3px; align-items:center; text-align:center; }
  .lb-label { font-size:.56rem; text-transform:uppercase; letter-spacing:.1em; color:var(--t2); font-weight:500; }
  .lb-val { font-size:.82rem; font-weight:600; color:var(--t1); line-height:1.2; }
  .lb-miner { color:var(--orange); }
  .mempool-bar { margin-bottom:14px; padding-bottom:12px; border-bottom:1px solid rgba(255,255,255,.05); }
  .mp-stats { display:grid; grid-template-columns:repeat(3,1fr); gap:10px; }
  @media (max-width:500px) {
    .lb-grid, .mp-stats { grid-template-columns:repeat(2,1fr); gap:8px; }
    .lb-label { font-size:.54rem; }
    .lb-val { font-size:.78rem; }
  }

  /* Network + Stack shared */
  .met3  { display:grid; grid-template-columns:repeat(3,1fr); gap:14px; margin-top:14px; }
  .met   { display:flex; flex-direction:column; gap:7px; text-align:center; align-items:center; }
  .met-n { font-size:1.4rem; font-weight:700; letter-spacing:-.03em; line-height:1; color:var(--t1); }
  .met-u { font-size:.48em; color:var(--t2); font-weight:400; margin-left:2px; }
  .btc-pill  { display:flex; align-items:baseline; padding:12px 14px; background:rgba(247,147,26,.05); border:1px solid rgba(247,147,26,.12); border-radius:8px; margin-bottom:16px; flex-wrap:wrap; gap:4px; }
  .goal-head { display:flex; justify-content:space-between; margin-bottom:7px; }
  @media (max-width:500px) {
    .met3 { grid-template-columns:repeat(3,1fr); gap:6px; margin-top:10px; }
    .met-n { font-size:1rem; }
    .met { gap:4px; }
    .btc-pill { padding:8px 10px; margin-bottom:12px; }
  }

  /* ── HASH RATE ROW ───────────────────────────────────────── */
  .hash-row { display:flex; justify-content:space-between; align-items:center; margin-top:14px; padding-top:12px; border-top:1px solid rgba(255,255,255,.05); }
  .hash-val { font-size:1rem; font-weight:700; color:var(--t1); font-variant-numeric:tabular-nums; }
  :global(html.light) .hash-row { border-top-color:rgba(0,0,0,.06); }

  /* ── BTC IN GOLD TILE ────────────────────────────────────── */
  .btc-gold-card { border-color:rgba(201,168,76,.22) !important; }
  .btc-gold-hero { display:flex; align-items:baseline; gap:8px; padding:18px 0 10px; justify-content:center; flex-wrap:wrap; }
  .btc-gold-n { font-size:clamp(2.4rem,5vw,3.6rem); font-weight:800; letter-spacing:-.04em; line-height:1; color:#c9a84c; }
  .btc-gold-unit { font-size:.9rem; font-weight:600; color:var(--t2); align-self:flex-end; padding-bottom:4px; }
  .btc-gold-sub { font-size:.6rem; color:var(--t2); text-transform:uppercase; letter-spacing:.1em; text-align:center; margin-bottom:14px; }
  .btc-gold-meta { display:flex; justify-content:space-between; align-items:center; padding-top:12px; border-top:1px solid rgba(255,255,255,.05); }
  .btc-gold-spot { font-size:.8rem; font-weight:600; color:var(--t1); font-variant-numeric:tabular-nums; }
  :global(html.light) .btc-gold-meta { border-top-color:rgba(0,0,0,.06); }

  /* ── AUSTRALIA SNAPSHOT TILE ─────────────────────────────── */
  .au-snapshot-card { border-color:rgba(0,0,150,.22) !important; }
  .au-rows { display:flex; flex-direction:column; gap:10px; margin-top:4px; }
  .au-row { display:flex; justify-content:space-between; align-items:center; padding:10px 12px; background:rgba(255,255,255,.03); border:1px solid rgba(255,255,255,.06); border-radius:8px; }
  .au-label { font-size:.66rem; color:var(--t2); font-weight:500; }
  .au-val { font-size:.8rem; font-weight:700; color:var(--t1); font-variant-numeric:tabular-nums; }
  .au-chg { font-size:.62rem; font-weight:600; margin-left:5px; }
  :global(html.light) .au-row { background:rgba(0,0,0,.02); border-color:rgba(0,0,0,.06); }

  /* ── BTC-IN-GOLD STAT TILE (stat-strip) ─────────────────── */
  .stat-tile--btc-gold { border-color:rgba(201,168,76,.22) !important; }
  /* 1 ₿ badge row */
  .btc-gold-badge-row { display:flex; justify-content:center; margin-bottom:2px; }
  .btc-gold-badge-btc { font-size:1.1rem; font-weight:900; letter-spacing:-.02em; line-height:1; }
  /* label under badge */
  .btc-gold-label { font-size:.52rem; font-weight:600; color:var(--t2); text-transform:uppercase; letter-spacing:.09em; margin-bottom:4px; }
  /* main price hero */
  .btc-gold-strip-hero { display:flex; align-items:baseline; gap:4px; justify-content:center; margin-bottom:4px; }
  .btc-gold-strip-n { font-size:1.35rem; font-weight:700; letter-spacing:-.025em; line-height:1.1; color:#c9a84c; }
  .btc-gold-strip-unit { font-size:.6rem; font-weight:600; color:var(--t2); align-self:flex-end; padding-bottom:2px; }
  /* year-ago + change history rows */
  .btc-gold-history { display:flex; flex-direction:column; gap:3px; width:100%; margin-top:2px; padding-top:5px; border-top:1px solid rgba(201,168,76,.12); }
  .btc-gold-hist-row { display:flex; justify-content:space-between; align-items:center; }
  .btc-gold-hist-label { font-size:.54rem; color:var(--t2); font-weight:500; text-transform:uppercase; letter-spacing:.06em; }
  .btc-gold-hist-val { font-size:.62rem; font-weight:700; color:var(--t1); font-variant-numeric:tabular-nums; }
  .btc-gold-hist-pct { font-size:.72rem; font-weight:800; font-variant-numeric:tabular-nums; }
  /* legacy spot text (loading state) */
  .btc-gold-strip-spot { font-size:.62rem; font-weight:600; color:var(--t2); margin-top:4px; font-variant-numeric:tabular-nums; }
  .crb--xs { padding:2px 7px; font-size:.52rem; }
  @media (max-width:500px) { .btc-gold-strip-n { font-size:1.1rem; } .btc-gold-badge-btc { font-size:.95rem; } }

  /* AU snapshot rows inside stat tile */
  .au-strip-rows { display:flex; flex-direction:column; gap:4px; margin-top:7px; width:100%; }
  .au-strip-row { display:flex; justify-content:space-between; align-items:center; padding:5px 8px;
    background:rgba(255,255,255,.03); border:1px solid rgba(255,255,255,.06); border-radius:6px; }
  .au-strip-row--ratio { border-color:rgba(100,160,255,.15); background:rgba(100,160,255,.04); }
  .au-strip-label { font-size:.55rem; color:var(--t2); font-weight:500; }
  .au-strip-val { font-size:.62rem; font-weight:700; color:var(--t1); font-variant-numeric:tabular-nums; }
  .au-ratio-val { color:#7eb8f7 !important; }
  .au-ratio-sub { font-size:.5rem; font-weight:500; color:var(--t2); }
  :global(html.light) .au-strip-row { background:rgba(0,0,0,.02); border-color:rgba(0,0,0,.06); }
  :global(html.light) .au-strip-row--ratio { background:rgba(60,100,200,.05); border-color:rgba(60,100,200,.12); }
  :global(html.light) .au-ratio-val { color:#2563eb !important; }

  /* ATH row highlighting */
  .btc-gold-ath-row { padding-top:3px; margin-top:2px; border-top:1px solid rgba(201,168,76,.18); } /* small visual separator above ATH rows */
  .btc-gold-ath-new { color:var(--up) !important; font-weight:700 !important; }
  .btc-gold-ath-date .btc-gold-hist-label { opacity:.55; font-size:.48rem; }

  /* Divider between halving and sats in combined tile */
  .halving-sats-divider { width:40%; height:1px; background:rgba(255,255,255,.08); margin:8px auto 6px; }

  /* ── PRICE SCENARIOS ─────────────────────────────────────── */
  .price-scen { margin-top:16px; padding-top:14px; border-top:1px solid rgba(255,255,255,.05); }
  .scen-grid { display:grid; grid-template-columns:repeat(4,1fr); gap:8px; }
  .scen-item { display:flex; flex-direction:column; gap:3px; align-items:center; text-align:center;
    background:rgba(255,255,255,.03); border:1px solid rgba(255,255,255,.06); border-radius:8px; padding:10px 6px;
    transition:transform .2s, border-color .2s;
  }
  .scen-item:hover { transform:translateY(-2px); border-color:rgba(247,147,26,.15); }
  .scen-price { font-size:.54rem; color:var(--t2); font-weight:600; text-transform:uppercase; letter-spacing:.06em; }
  .scen-val { font-size:.8rem; font-weight:700; letter-spacing:-.02em; line-height:1.2; }
  .scen-pct { font-size:.58rem; font-weight:600; }
  :global(html.light) .price-scen { border-top-color:rgba(0,0,0,.06); }
  :global(html.light) .scen-item { background:rgba(0,0,0,.02); border-color:rgba(0,0,0,.06); }
  @media (max-width:500px) { .scen-grid { grid-template-columns:repeat(2,1fr); } }

  /* ── PORTFOLIO GRID ─────────────────────────────────────── */
  .port-grid { display:grid; grid-template-columns:1fr 1.6fr; gap:var(--tile-gap); }
  @media (max-width:1000px) { .port-grid{grid-template-columns:1fr;} }

  .asset-panels { display:grid; grid-template-columns:1fr 1fr; gap:10px; margin-bottom:4px; }
  .ap {
    background:rgba(255,255,255,.03); border:1px solid rgba(255,255,255,.07);
    border-radius:8px; padding:16px 14px; position:relative; overflow:hidden;
    transition:transform .3s, border-color .3s, box-shadow .25s; text-align:center;
  }
  .ap::before { content:''; position:absolute; top:0; left:0; right:0; height:2px; background:linear-gradient(90deg,transparent,var(--pc,rgba(247,147,26,.5)),transparent); }
  .ap:hover { transform:translateY(-4px); border-color:rgba(255,255,255,.14); box-shadow:0 10px 28px rgba(0,0,0,.3); }
  .ap-top { display:flex; align-items:center; gap:9px; margin-bottom:12px; }
  .ap-icon { font-size:1.2rem; line-height:1; }
  .ap-ticker { font-size:.8rem; font-weight:700; }
  .ap-name { font-size:.58rem; color:var(--t2); margin-top:1px; }
  .ap-pct { font-size:1.9rem; font-weight:800; letter-spacing:-.04em; line-height:1; margin-bottom:3px; }
  .ap-sub { font-size:.62rem; color:var(--t2); margin-bottom:0; font-variant-numeric:tabular-nums; }
  .ap-live { font-size:.5em; color:var(--up); margin-left:4px; animation:blink 2s ease-in-out infinite; vertical-align:middle; }
  @keyframes apPulse { 0%,100%{opacity:.4} 50%{opacity:.8} }
  @media (max-width:500px) {
    .ap { padding:12px 10px; }
    .ap-top { margin-bottom:8px; }
    .ap-pct { font-size:1.6rem; }
  }
  @media (max-width:350px) { .asset-panels { grid-template-columns:1fr; } .ap-pct { font-size:1.5rem; } }

  .gf-hero { display:flex; flex-direction:column; gap:16px; margin-bottom:18px; }
  .gf-nw   { font-size:4.2rem; font-weight:700; letter-spacing:-.045em; line-height:1; color:var(--t1); }
  .gf-perf { display:grid; grid-template-columns:repeat(2,1fr); gap:12px; padding-top:16px; border-top:1px solid rgba(255,255,255,.06); }
  .gfp     { display:flex; flex-direction:column; gap:6px; padding:14px 16px; background:rgba(255,255,255,.02); border:1px solid rgba(255,255,255,.06); border-radius:8px; }
  .gfp-v   { font-size:1.4rem; font-weight:700; letter-spacing:-.025em; line-height:1; }
  /* Live indicator dot (used in portfolio and loading states) */
  .live-dot { display:inline-block; width:6px; height:6px; border-radius:50%; background:var(--up); flex-shrink:0; }

  /* ── GHOSTFOLIO SUMMARY STRIP ────────────────────────────── */
  .gf-summary { display:flex; flex-wrap:wrap; gap:12px; margin:0 0 16px; border:1px solid rgba(255,255,255,.06); border-radius:8px; padding:14px 16px; background:rgba(255,255,255,.02); }
  .gf-sum-item { display:flex; flex-direction:column; gap:5px; flex:1; min-width:80px; }
  .gf-sum-v { font-size:1rem; font-weight:700; letter-spacing:-.02em; color:var(--t1); line-height:1; }
  :global(html.light) .gf-summary { border-color:rgba(0,0,0,.08); background:rgba(0,0,0,.02); }

  /* Small icon refresh button */
  .btn-icon {
    display:inline-flex; align-items:center; justify-content:center;
    width:28px; height:28px; padding:0; border-radius:4px;
    background:rgba(255,255,255,.04); border:1px solid rgba(255,255,255,.1);
    color:rgba(255,255,255,.4); font-size:.72rem; cursor:pointer;
    transition:background .2s, border-color .2s, color .2s, box-shadow .2s;
    flex-shrink:0; position:relative; overflow:hidden;
  }
  .btn-icon::after {
    content:''; position:absolute; inset:0; pointer-events:none; border-radius:inherit;
    background:linear-gradient(105deg,transparent 25%,rgba(255,255,255,.55) 50%,transparent 75%);
    background-size:200% 100%; background-position:-200% center;
    transition:background-position .4s ease, opacity .2s ease;
    opacity:0;
  }
  .btn-icon:hover { border-color:rgba(247,147,26,.45); color:var(--orange); background:rgba(247,147,26,.14); box-shadow:0 0 8px rgba(247,147,26,.25); }
  .btn-icon:hover::after { background-position:200% center; opacity:1; }
  :global(html.light) .btn-icon { background:rgba(0,0,0,.03); border-color:rgba(0,0,0,.12); color:rgba(0,0,0,.5); }
  :global(html.light) .btn-icon:hover { border-color:rgba(200,120,16,.45); color:#c77a10; background:rgba(247,147,26,.1); box-shadow:0 0 8px rgba(200,120,16,.2); }

  @media (max-width:600px) {
    .gf-nw { font-size:2.8rem; }
    .gf-perf { grid-template-columns:repeat(2,1fr); padding-top:12px; }
    .gfp-v { font-size:1.1rem; }
  }

  /* ── PORTFOLIO PERFORMANCE CHART ────────────────────────── */
  .perf-chart-wrap { margin-top:16px; padding-top:16px; border-top:1px solid rgba(255,255,255,.05); }
  .perf-chart-head { display:flex; justify-content:space-between; align-items:center; margin-bottom:10px; flex-wrap:wrap; gap:6px; }
  :global(html.light) .perf-chart-wrap { border-top-color:rgba(0,0,0,.06); }

  /* ── INTEL TOGGLE — Apple-style ────────────────────────── */
  .intel-toggle-wrap { display:flex; align-items:center; gap:8px; margin-left:auto; }
  .toggle-icon { font-size:.9rem; color:var(--t3); transition:color .3s; line-height:1; cursor:default; }
  .toggle-icon--active { color:var(--orange); }
  .apple-toggle {
    position:relative; width:44px; height:26px;
    background:rgba(255,255,255,.12); border:1px solid rgba(255,255,255,.15);
    border-radius:13px; cursor:pointer;
    transition:background .3s, border-color .3s;
    padding:0; flex-shrink:0;
  }
  .apple-toggle--classic { background:var(--orange); border-color:var(--orange); }
  .apple-knob {
    position:absolute; top:3px; left:3px;
    width:18px; height:18px; border-radius:50%;
    background:#fff; box-shadow:0 1px 4px rgba(0,0,0,.35);
    transition:transform .3s cubic-bezier(.4,0,.2,1);
  }
  .apple-toggle--classic .apple-knob { transform:translateX(18px); }
  :global(html.light) .apple-toggle { background:rgba(0,0,0,.15); border-color:rgba(0,0,0,.2); }
  :global(html.light) .apple-toggle--classic { background:var(--orange); border-color:var(--orange); }
  :global(html.light) .toggle-icon { color:rgba(0,0,0,.3); }
  :global(html.light) .toggle-icon--active { color:#c77a10; }

  /* ── INTEL VIEW TRANSITION ─────────────────────────────── */
  .intel-view-wrap { position:relative; transition:opacity .35s ease; }
  .intel-view-wrap--transitioning { opacity:0; pointer-events:none; }
  @media (prefers-reduced-motion:reduce) {
    .intel-view-wrap--transitioning { opacity:1; }
  }

  /* ── INTEL CONSISTENT GC CONTAINER ─────────────────────── */
  .intel-gc { min-height:280px; }
  .globe-gc { min-height:unset; }

  /* ── GLOBE LIVE BADGE ───────────────────────────────────── */
  .globe-badge {
    font-size:.6rem; font-weight:700; letter-spacing:.1em; padding:3px 8px;
    border-radius:4px; border:1px solid rgba(239,68,68,.4);
    background:rgba(239,68,68,.12); color:#f87171; flex-shrink:0;
    animation:badge-blink 2.2s ease-in-out infinite;
  }
  .globe-badge--breaking {
    border-color:rgba(255,224,51,.5); background:rgba(255,224,51,.12); color:#ffe033;
    animation:badge-blink 0.9s step-start infinite;
  }
  @keyframes badge-blink { 0%,100%{opacity:1;} 50%{opacity:.55;} }

  /* ── INTEL CARD – CONSISTENT SIZING FOR BOTH VIEWS ─────── */
  .pm-card--intel { min-height:130px; }
  @media (max-width:600px) {
    .pm-card--intel { min-height:90px; }
    .intel-gc { min-height:unset; }
  }

  /* ── TOPIC ICON BACKGROUND (frosted) ───────────────────── */
  .pm-card-topic-icon {
    position:absolute; top:50%; right:10px; transform:translateY(-50%);
    font-size:2.8rem; line-height:1; opacity:.08; pointer-events:none; z-index:0;
    filter:blur(1px);
  }
  .pm-card-frosted-overlay {
    position:absolute; inset:0; z-index:0; pointer-events:none; border-radius:10px;
    background:linear-gradient(135deg,rgba(247,147,26,.03) 0%,transparent 60%);
  }
  :global(html.light) .pm-card-topic-icon { opacity:.06; }

  /* ── SECONDARY OUTCOMES (multi-outcome markets) ─────────── */
  .pm-secondary-outcomes {
    display:flex; flex-wrap:wrap; gap:4px 10px; margin-top:2px;
  }
  .pm-secondary-item {
    display:inline-flex; align-items:baseline; gap:3px;
  }
  .pm-secondary-name {
    font-size:.62rem; color:var(--t2); white-space:nowrap; overflow:hidden; text-overflow:ellipsis; max-width:120px;
  }
  .pm-secondary-pct {
    font-size:.62rem; font-weight:700; flex-shrink:0;
  }
  :global(html.light) .pm-secondary-name { color:rgba(0,0,0,.5); }

  /* ── BINARY PROBABILITY DISPLAY ────────────────────────── */
  .pm-binary-prob {
    display:flex; align-items:baseline; gap:6px; margin-top:auto;
  }
  .pm-binary-outcome {
    font-size:.75rem; font-weight:700; text-transform:uppercase; letter-spacing:.06em;
  }
  .pm-binary-pct {
    font-size:1.4rem; font-weight:800; line-height:1; letter-spacing:-.02em;
  }
  @media (max-width:600px) {
    .pm-binary-pct { font-size:1.2rem; }
  }

  /* ── POLYMARKET DATA ROW ───────────────────────────────── */
  .pm-card-data {
    display:flex; gap:5px; align-items:center; flex-wrap:wrap; margin-top:auto;
  }
  .pm-data-vol, .pm-data-vol24, .pm-data-liq {
    font-size:.54rem; font-weight:600; color:var(--t3); text-transform:uppercase; letter-spacing:.05em;
    padding:1px 6px; border-radius:4px; background:rgba(255,255,255,.03); border:1px solid rgba(255,255,255,.05);
  }
  .pm-data-vol24 { color:var(--t2); }
  .pm-data-liq { color:rgba(100,200,255,.7); border-color:rgba(100,200,255,.15); }
  :global(html.light) .pm-data-vol, :global(html.light) .pm-data-vol24, :global(html.light) .pm-data-liq {
    background:rgba(0,0,0,.03); border-color:rgba(0,0,0,.06); color:rgba(0,0,0,.4);
  }
  :global(html.light) .pm-data-vol24 { color:rgba(0,0,0,.55); }
  :global(html.light) .pm-data-liq { color:rgba(0,100,200,.55); }

  /* ── PROBABILITY BAR ───────────────────────────────────── */
  .pm-card-prob-bar {
    height:3px; background:rgba(255,255,255,.04); border-radius:2px; overflow:hidden; margin-top:4px;
  }
  .pm-prob-fill { height:100%; border-radius:2px; transition:width .7s ease; opacity:.7; }
  :global(html.light) .pm-card-prob-bar { background:rgba(0,0,0,.04); }
  :global(html.light) .pm-prob-fill { opacity:.5; }

  /* ── URGENT / TRENDING CARD VARIANTS ──────────────────── */
  .pm-card--urgent { border-color:rgba(255,180,50,.18); }
  .pm-card--urgent::before { background:linear-gradient(90deg,transparent,rgba(255,180,50,.25),transparent); }
  .pm-card--trending { border-color:rgba(255,80,40,.25); box-shadow:0 0 12px rgba(255,80,40,.08); }
  .pm-card--trending::before { background:linear-gradient(90deg,transparent,rgba(255,80,40,.22),transparent); }
  :global(html.light) .pm-card--urgent { border-color:rgba(200,120,0,.2); }
  :global(html.light) .pm-card--trending { border-color:rgba(200,50,50,.2); }

  /* ── TRENDING FOIL ANIMATION ────────────────────────────── */
  /* Removed foil animation — trending tag uses static highlight only */

  /* ── EXTRA TAG VARIANTS ────────────────────────────────── */
  .pm-trending-tag {
    background: rgba(220,60,30,.18);
    color: #ff7755 !important;
    border-color: rgba(255,80,40,.4);
    font-weight: 700;
  }
  @media (prefers-reduced-motion: reduce) {
    .pm-trending-tag { color: #ff6644 !important; background: rgba(255,60,30,.15); }
  }
  :global(html.light) .pm-trending-tag { background: rgba(180,40,20,.1); color: #c03020 !important; border-color: rgba(200,60,40,.35); }
  .pm-urgent-tag { background:rgba(255,180,50,.1); border-color:rgba(255,180,50,.3); color:#ffb432; }
  .pm-date-tag { color:var(--t3); }
  :global(html.light) .pm-urgent-tag { background:rgba(180,110,0,.08); border-color:rgba(180,110,0,.25); color:#946000; }

  /* ── INTEL GRID ─────────────────────────────────────────── */
  .intel-grid { display:grid; grid-template-columns:1fr 1fr; gap:var(--tile-gap); }
  @media (max-width:900px) { .intel-grid{grid-template-columns:1fr;} }
  @media (max-width:700px) {
    .intel-grid .gc { overflow:hidden; padding:12px 10px; }
  }

  /* ── MARKETS LOADING SKELETON ────────────────────────────── */
  .markets-loading { display:grid; grid-template-columns:repeat(3,1fr); gap:12px; padding:4px 0; }
  @media (max-width:900px) { .markets-loading { grid-template-columns:repeat(2,1fr); } }
  @media (max-width:600px) { .markets-loading { grid-template-columns:1fr; } }

  /* ── POLYMARKET CARD GRID — max 3 columns (3x4 = 12 tiles) ── */
  .pm-grid { display:grid; grid-template-columns:repeat(3,1fr); gap:12px; }
  @media (max-width:900px) { .pm-grid { grid-template-columns:repeat(2,1fr); } }
  @media (max-width:600px) { .pm-grid { grid-template-columns:1fr; } }
  .pm-card {
    display:flex; flex-direction:column; gap:8px;
    background:rgba(255,255,255,.11); border:1px solid rgba(255,255,255,.14); border-radius:10px;
    padding:16px 14px; text-decoration:none; transition:transform .2s, border-color .25s, box-shadow .25s;
    position:relative; overflow:hidden;
    box-shadow: 0 4px 18px rgba(0,0,0,.28), inset 0 1px 0 rgba(255,255,255,.18);
  }
  .pm-card::before { content:''; position:absolute; top:0; left:0; right:0; height:1px; background:linear-gradient(90deg,transparent,rgba(255,255,255,.45),transparent); z-index:0; }
  .pm-card:hover { transform:translateY(-4px); border-color:rgba(255,255,255,.22); box-shadow:0 12px 32px rgba(0,0,0,.38), inset 0 1px 0 rgba(255,255,255,.22); }
  .pm-card-tags { display:flex; gap:4px; flex-wrap:wrap; }
  .pm-tag { font-size:.54rem; font-weight:600; text-transform:uppercase; letter-spacing:.07em; padding:2px 8px; border-radius:999px;
    background:rgba(255,255,255,.04); border:1px solid rgba(255,255,255,.08); color:var(--t2); }
  .pm-pin { background:rgba(247,147,26,.09); border-color:rgba(247,147,26,.26); color:var(--orange); }
  .pm-news-src { background:rgba(247,147,26,.09); border-color:rgba(247,147,26,.26); color:var(--orange); }
  .pm-prob-tag { font-weight:700; }
  .pm-card-q { font-size:.84rem; color:var(--t1); line-height:1.5; font-weight:500; flex:1; }
  @media (max-width:600px) {
    .pm-grid {
      display:flex; flex-direction:column;
      overflow-x:hidden;
      gap:10px;
    }
    .pm-grid .pm-card {
      width:100%;
      min-height:auto;
      display:flex !important;
    }
    .pm-card-q { font-size:.82rem; }
  }

  :global(html.light) .pm-card { background:rgba(0,0,0,.02); border-color:rgba(0,0,0,.07); }
  :global(html.light) .pm-card:hover { border-color:rgba(247,147,26,.2); }
  :global(html.light) .pm-tag { background:rgba(0,0,0,.03); border-color:rgba(0,0,0,.08); color:rgba(0,0,0,.5); }
  :global(html.light) .pm-card-q { color:rgba(0,0,0,.75); }

  :global(html.light) .pm-news-src { background:rgba(247,147,26,.08); border-color:rgba(247,147,26,.25); color:#c77a10; }

  /* Intel section padding on mobile */
  #intel.section { padding-bottom: 80px; }
  @media (max-width:700px) {
    #intel.section { padding-top: 20px; padding-bottom: 80px; }
  }

  /* ── TILE MODAL BACKDROP ─────────────────────────────── */
  .tile-modal-backdrop {
    position:fixed; inset:0; z-index:200;
    background:rgba(0,0,0,.6);
    backdrop-filter:blur(6px); -webkit-backdrop-filter:blur(6px);
    display:flex; align-items:center; justify-content:center; padding:24px;
  }

  /* ── TILE MODAL ──────────────────────────────────────── */
  .tile-modal {
    position:relative; width:min(92vw,920px); max-height:82vh;
    overflow-y:auto; overflow-x:hidden; padding:28px;
  }
  /* Suppress the default gc hover lift inside the modal */
  .tile-modal:hover { transform:none; }

  /* ── TILE MODAL CLOSE BUTTON ─────────────────────────── */
  .tile-modal-close {
    position:absolute; top:14px; right:14px;
    width:28px; height:28px; border-radius:50%;
    background:rgba(255,255,255,.07); border:1px solid rgba(255,255,255,.12);
    color:var(--t2); cursor:pointer; font-size:.75rem;
    display:flex; align-items:center; justify-content:center; font-family:inherit;
    transition:background .15s,color .15s,border-color .15s;
  }
  .tile-modal-close:hover { background:rgba(255,255,255,.14); color:var(--t1); border-color:rgba(255,255,255,.22); }
  :global(html.light) .tile-modal-close { background:rgba(0,0,0,.04); border-color:rgba(0,0,0,.1); color:rgba(0,0,0,.5); }
  :global(html.light) .tile-modal-close:hover { background:rgba(0,0,0,.08); color:rgba(0,0,0,.75); }

  /* Prediction market — PolyMarket-inspired */
  .mkt {
    display:block; border-bottom:1px solid rgba(255,255,255,.05);
    text-decoration:none; transition:background .2s; border-radius:6px; margin:0 -8px; padding:12px 8px;
  }
  .mkt:last-child { border-bottom:none; }
  .mkt:hover { background:rgba(255,255,255,.04); }
  .mkt-row { display:flex; justify-content:space-between; align-items:flex-start; gap:14px; margin-bottom:8px; }
  .mkt-left { flex:1; min-width:0; }
  .mkt-right { flex-shrink:0; text-align:right; display:flex; flex-direction:column; align-items:flex-end; gap:5px; }
  .mkt-tags { margin-bottom:5px; }
  .mkt-q { font-size:.84rem; color:var(--t1); line-height:1.5; display:block; margin-bottom:5px; font-weight:500; }
  .mkt-prob { font-size:1.9rem; font-weight:800; line-height:1; letter-spacing:-.04em; }
  .mkt-pct { font-size:.65rem; font-weight:600; opacity:.55; }
  .mkt-outcome-badge { font-size:.58rem; font-weight:700; padding:3px 8px; border-radius:4px; border:1px solid; white-space:nowrap; text-transform:uppercase; letter-spacing:.04em; }
  .mkt-bar { height:5px; background:rgba(255,255,255,.04); border-radius:3px; overflow:hidden; display:flex; }
  .mkt-fill { height:100%; border-radius:3px 0 0 3px; transition:width .7s; opacity:.75; }
  .mkt-fill-rest { height:100%; border-radius:0 3px 3px 0; background:rgba(255,255,255,.04); transition:width .7s; }
  .mkt-meta-row { display:flex; align-items:center; gap:6px; flex-wrap:wrap; margin-top:3px; }
  .mkt-tag { font-size:.56rem; font-weight:600; text-transform:uppercase; letter-spacing:.07em; padding:3px 8px; border-radius:999px; background:rgba(255,255,255,.04); border:1px solid rgba(255,255,255,.07); color:var(--t2); }
  .mkt-pin { background:rgba(247,147,26,.09); border-color:rgba(247,147,26,.24); color:var(--orange); }
  @media (max-width:500px) { .mkt-prob { font-size:1.5rem; } .mkt-q { font-size:.78rem; } }

  .news {
    display:block; padding:0; border-bottom:1px solid rgba(255,255,255,.05); text-decoration:none;
    overflow:hidden; border-radius:10px; margin-bottom:10px; transition:transform .2s, box-shadow .25s;
  }
  .news:last-child { border-bottom:none; margin-bottom:0; }
  .news:hover { transform:translateY(-2px); box-shadow:0 6px 20px rgba(0,0,0,.3); }
  /* News item with image */
  .news-img {
    position:relative; background-size:cover; background-position:center; border-radius:8px;
    min-height:120px; display:flex; flex-direction:column; justify-content:flex-end; overflow:hidden;
  }
  .news-img::before {
    content:''; position:absolute; inset:-6px;
    background:inherit; background-size:cover; background-position:center;
    filter:blur(12px) saturate(90%) sepia(25%); z-index:0; border-radius:8px;
    transform:scale(1.05);
  }
  .news-img-overlay {
    position:absolute; inset:0; z-index:1; background:linear-gradient(180deg, rgba(247,147,26,.13) 0%, rgba(15,7,0,.74) 55%, rgba(8,3,0,.93) 100%);
    backdrop-filter:blur(2px); -webkit-backdrop-filter:blur(2px);
    border-radius:8px;
  }
  .news-img-content {
    position:relative; z-index:2; padding:14px 14px 12px;
  }
  .news-img-content .news-title { color:#fff; opacity:.95; margin-bottom:5px; font-size:.82rem; line-height:1.45; }
  .news-img-content .news-meta { opacity:.8; }
  /* News item without image */
  .news-title { display:block; font-size:.82rem; color:var(--t1); opacity:.75; line-height:1.5; margin-bottom:5px; transition:opacity .2s; padding:10px 0 0; font-weight:500; }
  .news:hover .news-title { opacity:1; }
  .news-meta { display:flex; gap:10px; align-items:center; padding-bottom:10px; }
  .news-src { font-size:.62rem; color:var(--orange); font-weight:700; text-transform:uppercase; letter-spacing:.05em; }
  .news-desc { font-size:.68rem; color:var(--t2); line-height:1.55; margin-bottom:6px; opacity:.75; }
  :global(html.light) .news-desc { color:rgba(0,0,0,.45); }
  :global(html.light) .news { border-bottom-color:rgba(0,0,0,.06); }
  :global(html.light) .news-title { color:rgba(0,0,0,.65); }
  :global(html.light) .news:hover .news-title { color:#111; }
  :global(html.light) .news-src { color:#c77a10; }
  :global(html.light) .news-img-overlay { background:linear-gradient(180deg, rgba(0,0,0,.08) 0%, rgba(0,0,0,.6) 70%, rgba(0,0,0,.82) 100%); }

  /* ── LIGHT MODE OVERRIDES (page-level) ────────────────── */
  :global(html.light) .price-label-usd { color: #22c55e; }
  :global(html.light) .sats-cur { color:#111; }
  :global(html.light) .sats-label-sats { -webkit-text-fill-color:unset; background:none; color:#c77a10; animation:none; }
  :global(html.light) .sats-label-cur  { color:#16a34a; }
  :global(html.light) .eyebrow.orange  { -webkit-text-fill-color:unset; background:none; color:#c77a10; animation:none; }
  :global(html.light) .pbar { background:rgba(0,0,0,.06); }
  :global(html.light) .vband-track { background:rgba(0,0,0,.04); }
  :global(html.light) .vband-dot { background:#fff; border-color:var(--orange); }
  :global(html.light) .vzone--low  { background:linear-gradient(90deg,rgba(22,163,74,.25),rgba(22,163,74,.08)); }
  :global(html.light) .vzone--mid  { background:linear-gradient(90deg,rgba(200,122,16,.08),rgba(200,122,16,.15),rgba(200,122,16,.08)); }
  :global(html.light) .vzone--high { background:linear-gradient(90deg,rgba(220,38,38,.08),rgba(220,38,38,.25)); }
  :global(html.light) .vband-labels { color:rgba(0,0,0,.35); }
  :global(html.light) .latest-block { border-bottom-color:rgba(0,0,0,.06); }
  :global(html.light) .mempool-bar { border-bottom-color:rgba(0,0,0,.06); }
  :global(html.light) .lb-miner { color:#c77a10; }
  :global(html.light) .lb-label { color:rgba(0,0,0,.45); }
  :global(html.light) .sigs { border-top-color:rgba(0,0,0,.06); }
  :global(html.light) .pip { background:rgba(0,0,0,.06); border-color:rgba(0,0,0,.12); }
  :global(html.light) .mkt { border-bottom-color:rgba(0,0,0,.06); }
  :global(html.light) .mkt:hover { background:rgba(0,0,0,.02); }
  :global(html.light) .mkt-bar { background:rgba(0,0,0,.04); }
  :global(html.light) .mkt-fill { opacity:.55; }
  :global(html.light) .mkt-fill-rest { background:rgba(0,0,0,.04); }
  :global(html.light) .mkt-tag { background:rgba(0,0,0,.03); border-color:rgba(0,0,0,.08); color:rgba(0,0,0,.5); }
  :global(html.light) .mkt-q { color:rgba(0,0,0,.75); }
  :global(html.light) .btc-pill { background:rgba(247,147,26,.04); border-color:rgba(247,147,26,.15); }
  :global(html.light) .ap { background:rgba(0,0,0,.02); border-color:rgba(0,0,0,.06); }
  :global(html.light) .ap:hover { border-color:rgba(0,0,0,.12); }
  :global(html.light) .gc:hover { border-color:rgba(0,0,0,.12); }
  :global(html.light) .gf-perf { border-top-color:rgba(0,0,0,.08); }
  :global(html.light) .gfp { background:rgba(0,0,0,.02); border-color:rgba(0,0,0,.06); }
  /* Light-mode: override section bottom-fade to use light background */
  @media (max-width:700px) {
    :global(html.light) .section::after { background:linear-gradient(to bottom, transparent, #f0f0f1); }
  }
